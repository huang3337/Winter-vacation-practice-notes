# 第8次笔记

串口

1. 串口是一种应用十分广泛的通讯接口，串口成本低、容易使用、通信线路简单，可实现两个设备的互相通信。单片机的串口可以使单片机与单片机、单片机与电脑、单片机与各式各样的模块互相通信，极大的扩展了单片机的应用范围，增强了单片机系统的硬件实力。51单片机内部自带UART（Universal Asynchronous Receiver Transmitter，通用异步收发器），可实现单片机的串口通信。

2. 硬件电路：

   简单双向串口通信有两根通信线（发送端TXD和接收端RXD）TXD与RXD要交叉连接当只需单向的数据传输时，可以直接一根通信线当电平标准不一致时，需要加电平转换芯片

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/ScreenShot_2026-02-24_135925_083.png)

3. 电平标准：

   电平标准是数据1和数据0的表达方式，是传输线缆中人为规定的电压与数据的对应关系，串口常用的电平标准有如下三种：

   TTL电平：+5V表示1，0V表示0

   RS232电平：-3~-15V表示1，+3~+15V表示0

   RS485电平：两线压差+2~+6V表示1，-2~-6V表示0（差分信号）

4. 常见通信接口：

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/ScreenShot_2026-02-24_143337_223.png)
| 特性 | 单工 (Simplex) | 半双工 (Half-Duplex) | 全双工 (Full-Duplex) |
| :--- | :--- | :--- | :--- |
| **方向性** | 单向 (A → B) | 双向 (A ↔ B) | 双向 (A ↔ B) |
| **同时性** | 无 | **不能同时** (分时进行) | **可以同时** (实时进行) |
| **通道需求** | 1 条通道 | 1 条通道 (分时复用) | 通常需 2 条独立通道 |
| **效率** | 低 (无反馈) | 中 (需等待/切换) | **高** |
| **生活类比** | 单行道 | 独木桥 | 双向车道 |
| **典型设备** | 广播、遥控器、鼠标 | 对讲机、Hub集线器 | 手机、交换机、SATA |
5. 相关术语：

   全双工：通信双方可以在同一时刻互相传输数据

   半双工：通信双方可以互相传输数据，但必须分时复用一根数据线

   单工：通信只能有一方发送到另一方，不能反向传输

   异步：通信双方各自约定通信速率

   同步：通信双方靠一根时钟线来约定通信速率

   总线：连接各个设备的数据传输线路（类似于一条马路，把路边各住户连接起来，使住户可以相互交流）

6. 51单片机的UART：

   STC89C52有1个UARTSTC89C52的UART有四种工作模式：

   模式0：同步移位寄存器

   模式1：8位UART，波特率可变（常用）

   模式2：9位UART，波特率固定

   模式3：9位UART，波特率可变

7. 串口模式图

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/%E5%9B%BE%E7%89%871.png)

   SBUF：串口数据缓存寄存器，物理上是两个独立的寄存器，但占用相同的地址。写操作时，写入的是发送寄存器，读操作时，读出的是接收寄存器

8. 有关波特率的计算

   串口传输的波特率即为每秒钟传输二进制的位数；

   系统时钟：为串口提供时钟的时钟频率；

   时钟周期：1/系统时钟，计数一次需要一个时钟周期；

   传输1bit需要 1/波特率 的时间；

   传输1bit需要计数  (1/波特率)/(1/系统时钟)；

   我们通常用的串口传输格式为:1bit起始位+8bit数据位+1bit停止位(无奇偶校验位)，如5.中图。所以传输1Byte数据，串口需要传输10bit数据，则传输1Byte需要时间为 10\*1/波特率 ，则传输1bit需要计数  (1/波特率)/(1/系统时钟)\*10 次。

5. 串口参数及时序图：

   波特率：串口通信的速率（发送和接收各数据位的间隔时间）

   检验位：用于数据验证

   停止位：用于数据帧间隔

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/ScreenShot_2026-02-24_145227_825.png)

6. 串口控制寄存器SCON和PCON

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/ScreenShot_2026-02-24_174117_074.png)

   ![](./%E7%AC%AC8%E6%AC%A1%E7%AC%94%E8%AE%B0.assets/ScreenShot_2026-02-24_174132_253.png)